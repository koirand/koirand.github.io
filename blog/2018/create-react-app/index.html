<!DOCTYPE html>
<html>
  <head>
  <title>
      
          React開発環境構築(create-react-app利用) - Kazuki Koide
      
  </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Kazuki Koide" />
  <link rel="shortcut icon" type="image/x-icon" href="https://koirand.github.io/img/favicon.ico">

  
  
  
  
  
  <link rel="stylesheet" href="https://koirand.github.io/style.min.6f642c5866835106e8a19b94463576436c99be9e41a8714ab3df3daa95f6bf90.css" integrity="sha256-b2QsWGaDUQbooZuURjV2Q2yZvp5BqHFKs989qpX2v5A=">
  
  
  
  <link rel="stylesheet" href="https://koirand.github.io/style-dark.min.0a647fb6c07e04b77b54fa0515d0a683d39ecdb251dba960fe1f966f7ff36fc2.css" media="(prefers-color-scheme: dark)" integrity="sha256-CmR/tsB&#43;BLd7VPoFFdCmg9OezbJR26lg/h&#43;Wb3/zb8I=">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

  
  

  <meta property="og:title" content="React開発環境構築(create-react-app利用)" />
<meta property="og:description" content="Reactアプリの開発環境を一から構築するのは中々辛いものがある。たくさんモジュールを入れないといけないし、それらのモジュールの依存関係にも" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://koirand.github.io/blog/2018/create-react-app/" />
<meta property="article:published_time" content="2018-12-10T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-12-10T00:00:00+00:00" />
<meta itemprop="name" content="React開発環境構築(create-react-app利用)">
<meta itemprop="description" content="Reactアプリの開発環境を一から構築するのは中々辛いものがある。たくさんモジュールを入れないといけないし、それらのモジュールの依存関係にも">
<meta itemprop="datePublished" content="2018-12-10T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-12-10T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="1525">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:image" content="https://koirand.github.io/img/avatar.jpg"/>
<meta name="twitter:title" content="React開発環境構築(create-react-app利用)"/>
<meta name="twitter:description" content="Reactアプリの開発環境を一から構築するのは中々辛いものがある。たくさんモジュールを入れないといけないし、それらのモジュールの依存関係にも"/>

  <!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->

  <!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <![endif]-->

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-126342153-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</head>

  <body>
    
  <h1>React開発環境構築(create-react-app利用)</h1>
  <header>
  
  <div class="avatar">
    <img class="avatarMask" src="https://koirand.github.io/img/avatar.jpg" alt="">
    <a href="https://koirand.github.io"><img class="avatar-border" src="https://koirand.github.io/img/avatar-border.svg" alt=""></a>
  </div>
  
  <h2><a class="author" href="https://koirand.github.io">Kazuki Koide</a></h2>
</header>

  
  
  
  <p class="date">December 10, 2018</p>
  
  
  
  
  <div id="contentBody">
    <p>Reactアプリの開発環境を一から構築するのは中々辛いものがある。たくさんモジュールを入れないといけないし、それらのモジュールの依存関係にも気を配らないといけない。ビルドやlintの設定を書くのも面倒。しかし今は<code>create-react-app</code>という便利なコマンドがあるようなので使ってみた。</p>
<h2 id="公式ドキュメント">公式ドキュメント</h2>
<p><a href="https://facebook.github.io/create-react-app/">Create React App · Set up a modern web app by running one command.</a></p>
<h2 id="アプリケーションの作成">アプリケーションの作成</h2>
<pre><code class="language-shell">$ yarn global add create-react-app
$ create-react-app my-app

yarn create v1.12.3
[1/4] 🔍  Resolving packages...
[2/4] 🚚  Fetching packages...
[3/4] 🔗  Linking dependencies...
[4/4] 📃  Building fresh packages...
success Installed &quot;create-react-app@2.1.1&quot; with binaries:
      - create-react-app
[################################################################] 64/64
Creating a new React app in /Users/kazuki/Projects/my-app.

Installing packages. This might take a couple of minutes.
Installing react, react-dom, and react-scripts...

yarn add v1.12.3
[1/4] 🔍  Resolving packages...
[2/4] 🚚  Fetching packages...
[3/4] 🔗  Linking dependencies...
[4/4] 📃  Building fresh packages...
success Saved lockfile.
success Saved 6 new dependencies.
info Direct dependencies
├─ react-dom@16.6.3
├─ react-scripts@2.1.1
└─ react@16.6.3
info All dependencies
├─ babel-preset-react-app@6.1.0
├─ react-dev-utils@6.1.1
├─ react-dom@16.6.3
├─ react-error-overlay@5.1.0
├─ react-scripts@2.1.1
└─ react@16.6.3
✨  Done in 9.55s.

Initialized a git repository.

Success! Created my-app at /Users/kazuki/Projects/my-app
Inside that directory, you can run several commands:

  yarn start
    Starts the development server.

  yarn build
    Bundles the app into static files for production.

  yarn test
    Starts the test runner.

  yarn eject
    Removes this tool and copies build dependencies, configuration files
    and scripts into the app directory. If you do this, you can’t go back!
</code></pre>
<blockquote>
<p><a href="https://yarnpkg.com/lang/ja/docs/cli/create/">yarn create | Yarn</a></p>
</blockquote>
<p>ちなみに、TypeScriptを使う場合は、</p>
<pre><code class="language-shell">$ create-react-app my-app --typescript
</code></pre>
<p>と<code>--typescript</code>をつければ良いらしい。</p>
<h2 id="ファイル構成">ファイル構成</h2>
<pre><code>my-app
├── .git
├── .gitignore
├── README.md
├── node_modules
├── package.json
├── public
|   ├── favicon.ico
|   ├── index.html
|   └── manifest.json
├── src
|   ├── App.css
|   ├── App.js
|   ├── App.test.js
|   ├── index.css
|   ├── index.js
|   ├── logo.svg
|   └── serviceWorker.js
└── yarn.lock
</code></pre>
<p>READMEやserviceWorker、manifest.jsonも生成してくれて、gitの初期化までしてくれる。至れり尽くせり。以下利用上の注意点。</p>
<ul>
<li><code>public/index.html</code>と<code>src/index.js</code>はリネーム、削除してはいけない</li>
<li>ビルド時の処理対象はsrcフォルダ配下のみ</li>
<li>ビルド後の静的ファイルが参照できるのはpublicフォルダ配下のみ</li>
</ul>
<h2 id="packagejson">package.json</h2>
<p>Babelやwebpackのややこしいところがreact-scriptsで抽象化されている。</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;my-app&quot;,
  &quot;version&quot;: &quot;0.1.0&quot;,
  &quot;private&quot;: true,
  &quot;dependencies&quot;: {
    &quot;react&quot;: &quot;^16.6.3&quot;,
    &quot;react-dom&quot;: &quot;^16.6.3&quot;,
    &quot;react-scripts&quot;: &quot;2.1.1&quot;
  },
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;react-scripts start&quot;,
    &quot;build&quot;: &quot;react-scripts build&quot;,
    &quot;test&quot;: &quot;react-scripts test&quot;,
    &quot;eject&quot;: &quot;react-scripts eject&quot;
  },
  &quot;eslintConfig&quot;: {
    &quot;extends&quot;: &quot;react-app&quot;
  },
  &quot;browserslist&quot;: [
    &quot;&gt;0.2%&quot;,
    &quot;not dead&quot;,
    &quot;not ie &lt;= 11&quot;,
    &quot;not op_mini all&quot;
  ]
}
</code></pre>
<h2 id="create-react-appに含まれるもの">create-react-appに含まれるもの</h2>
<pre><code class="language-shell">$ npm ls --depth=1
my-app@0.1.0
├── node-pre-gyp@0.10.3 extraneous
├─┬ react@16.6.3
│ ├── loose-envify@1.4.0
│ ├── object-assign@4.1.1
│ ├── prop-types@15.6.2
│ └── scheduler@0.11.3
├─┬ react-dom@16.6.3
│ ├── loose-envify@1.4.0 deduped
│ ├── object-assign@4.1.1 deduped
│ ├── prop-types@15.6.2 deduped
│ └── scheduler@0.11.3 deduped
└─┬ react-scripts@2.1.1
  ├── @babel/core@7.1.0
  ├── @svgr/webpack@2.4.1
  ├── babel-core@7.0.0-bridge.0
  ├── babel-eslint@9.0.0
  ├── babel-jest@23.6.0
  ├── babel-loader@8.0.4
  ├── babel-plugin-named-asset-import@0.2.3
  ├── babel-preset-react-app@6.1.0
  ├── bfj@6.1.1
  ├── case-sensitive-paths-webpack-plugin@2.1.2
  ├── chalk@2.4.1
  ├── css-loader@1.0.0
  ├── dotenv@6.0.0
  ├── dotenv-expand@4.2.0
  ├── eslint@5.6.0
  ├── eslint-config-react-app@3.0.5
  ├── eslint-loader@2.1.1
  ├── eslint-plugin-flowtype@2.50.1
  ├── eslint-plugin-import@2.14.0
  ├── eslint-plugin-jsx-a11y@6.1.2
  ├── eslint-plugin-react@7.11.1
  ├── file-loader@2.0.0
  ├── fork-ts-checker-webpack-plugin-alt@0.4.14
  ├── fs-extra@7.0.0
  ├── fsevents@1.2.4
  ├── html-webpack-plugin@4.0.0-alpha.2
  ├── identity-obj-proxy@3.0.0
  ├── jest@23.6.0
  ├── jest-pnp-resolver@1.0.1
  ├── jest-resolve@23.6.0
  ├── mini-css-extract-plugin@0.4.3
  ├── optimize-css-assets-webpack-plugin@5.0.1
  ├── pnp-webpack-plugin@1.1.0
  ├── postcss-flexbugs-fixes@4.1.0
  ├── postcss-loader@3.0.0
  ├── postcss-preset-env@6.0.6
  ├── postcss-safe-parser@4.0.1
  ├── react-app-polyfill@0.1.3
  ├── react-dev-utils@6.1.1
  ├── resolve@1.8.1
  ├── sass-loader@7.1.0
  ├── style-loader@0.23.0
  ├── terser-webpack-plugin@1.1.0
  ├── url-loader@1.1.1
  ├── webpack@4.19.1
  ├── webpack-dev-server@3.1.9
  ├── webpack-manifest-plugin@2.0.4
  └── workbox-webpack-plugin@3.6.3
</code></pre>
<p>だいたい必要なやつは入っている。PrettireやCSS in JSは標準では入っていないようなので、使いたい場合は自分で入れる必要がある。</p>
<h2 id="lintprettire">Lint、Prettire</h2>
<p>.eslintrcや.prettierrcを書くのはとてもダルいので、Standard Style専用のモジュールを入れてしまう。</p>
<pre><code>yarn add -D standard prettier-standard
</code></pre>
<blockquote>
<ul>
<li><a href="https://standardjs.com/">JavaScript Standard Style</a></li>
<li><a href="https://github.com/sheerun/prettier-standard">sheerun/prettier-standard: (✿◠‿◠) Prettier and standard brought together!</a></li>
</ul>
</blockquote>
<p>Macで開発する場合、標準で入っているtidyのバージョンが古く、HTML5に対応していないので、tidy-html5を入れておくと良い。</p>
<pre><code class="language-shell">$ brew install tidy-html5
</code></pre>
<h2 id="vimの設定">Vimの設定</h2>
<p>以下の設定にすると、保存時に自動的に修正されるようになる。楽チン。</p>
<pre><code>let g:ale_fixers = {'javascript': ['prettier_standard']}
let g:ale_fix_on_save = 1
</code></pre>
<h2 id="atom">Atom</h2>
<p>以下２つのプラグインを入れればOK</p>
<ul>
<li>linter-js-standard</li>
<li>standard-formatter</li>
</ul>
<h2 id="vscode">VSCode</h2>
<p><code>StandardJS</code> プラグインを入れればOK</p>
<h2 id="まとめ">まとめ</h2>
<p>思ったより使いやすくて気に入った。webpack.config.jsを書かなくて済むのは大変良い。facebookのオフィシャルツールなので安心感がある。同じようなコンセプトのモジュールに<a href="https://parceljs.org/">Parcel</a>というものもあるので、React以外の場合は使ってみると良いかもしれない。</p>

  </div>
  <footer>
  <p>
  &copy; 2018 Kazuki Koide.
  Powered by <a href="https://gohugo.io/">Hugo</a>
  using the <a href="https://github.com/koirand/pulp/">pulp</a> theme.
  </p>
</footer>


  </body>
</html>
